<%-
  groups = OodSupport::User.new.groups.sort_by(&:id).tap { |groups|
    groups.unshift(groups.delete(OodSupport::Process.group))
  }.map(&:name).grep(/^P./)
-%>
---
cluster:
  - "borah"
form:
  - version
  - num_cores
  - node_type
  - bc_num_slots
  - bc_num_hours
  - bc_vnc_resolution
  - bc_email_on_started
attributes:
  bc_num_slots: 1
  bc_vnc_resolution:
    required: true
  version:
    widget: select
    label: "MATLAB version"
    help: "This defines the version of MATLAB you want to load."
    options:
      - [
          "R2023b", "matlab/r2023b",
        ]
      - [
          "R2020a", "matlab/r2020a",
        ]
  node_type:
    widget: select
    label: "Node type"
    help: |
      - **CPU only** <br>
        Standard Borah nodes have 48 cores and 186 GB of memory.
        By selecting a "CPU" session, you can select between 4 and 24 CPU cores.
      - **GPU enabled** <br>
        These are HPC nodes with 2 [NVIDIA Tesla P100 GPUs], 28 cores, and
        251 GB of memory.
        By selecting a "GPU" session, you will be given 14 cores and 1 GPU.
        [NVIDIA Tesla P100 GPU]: http://www.nvidia.com/object/tesla-p100.html
    options:
      - [
          "CPU",     "cpu",
          data-max-num-cores: 24,
          data-step-num-cores: 4,
          data-set-num-cores: 4,
          data-min-num-cores: 4,
        ]
      - [
          "GPU",     "gpu",
          data-max-num-cores: 14,
          data-step-num-cores: 7,
          data-set-num-cores: 14,
          data-min-num-cores: 7,
        ]
  num_cores:
    widget: "number_field"
    label: "Number of cores"
    help: |
      Number of cores on node type (4 GB per core unless requesting whole
      node). Leave blank if requesting full node.
    min: 0
    max: 14
    step: 1
